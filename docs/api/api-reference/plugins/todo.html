<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo Plugin - jaato docs</title>
  <link rel="stylesheet" href="../../assets/css/style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <a href="../../index.html" class="header-logo">
      jaato <span>docs</span>
    </a>
    <nav class="header-nav">
      <a href="../../getting-started/quickstart.html">Quickstart</a>
      <a href="../index.html">API Reference</a>
      <a href="https://github.com/apanoia/jaato" target="_blank">GitHub</a>
      <div class="header-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <input type="text" placeholder="Search docs... (press /)">
      </div>
    </nav>
  </header>

  <!-- Layout -->
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Getting Started</div>
        <ul class="sidebar-nav">
          <li><a href="../../getting-started/quickstart.html">Quickstart</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">Core Concepts</div>
        <ul class="sidebar-nav">
          <li><a href="../../core-concepts/client.html">Client</a></li>
          <li><a href="../../core-concepts/plugins.html">Plugins</a></li>
          <li><a href="../../core-concepts/tools.html">Tools</a></li>
          <li><a href="../../core-concepts/providers.html">Providers</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">API Reference</div>
        <ul class="sidebar-nav">
          <li><a href="../index.html">Overview</a></li>
          <li><a href="../jaato-client.html">JaatoClient</a></li>
          <li><a href="../plugin-registry.html">PluginRegistry</a></li>
          <li><a href="../types.html">Types</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">Provider Reference</div>
        <ul class="sidebar-nav">
          <li><a href="../providers/index.html">Overview</a></li>
          <li><a href="../providers/google-genai.html">Google GenAI</a></li>
        </ul>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">Plugin Reference</div>
        <ul class="sidebar-nav">
          <li><a href="index.html">Overview</a></li>
          <li><a href="cli.html">CLI</a></li>
          <li><a href="mcp.html">MCP</a></li>
          <li><a href="file-edit.html">File Edit</a></li>
          <li><a href="todo.html" class="active">Todo</a></li>
          <li><a href="web-search.html">Web Search</a></li>
          <li><a href="permission.html">Permission</a></li>
          <li><a href="session.html">Session</a></li>
          <li><a href="other.html">Other Plugins</a></li>
        </ul>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main">
      <!-- Overview -->
      <section class="two-panel">
        <div class="panel-explanation">
          <h1>Todo Plugin</h1>
          <p class="lead">
            Plan registration and progress tracking. Enables the model to create
            execution plans, report progress on steps, and provide visibility
            into task completion.
          </p>

          <table>
            <tbody>
              <tr>
                <td><strong>Name</strong></td>
                <td><code>todo</code></td>
              </tr>
              <tr>
                <td><strong>Type</strong></td>
                <td>Tool Plugin (Registry-managed)</td>
              </tr>
              <tr>
                <td><strong>Tools Provided</strong></td>
                <td><code>createPlan</code>, <code>startPlan</code>, <code>updateStep</code>, <code>getPlanStatus</code>, <code>completePlan</code>, <code>addStep</code></td>
              </tr>
              <tr>
                <td><strong>User Commands</strong></td>
                <td><code>plan</code></td>
              </tr>
              <tr>
                <td><strong>Auto-approved</strong></td>
                <td>All except <code>startPlan</code></td>
              </tr>
            </tbody>
          </table>

          <h2 id="workflow">Workflow</h2>
          <ol>
            <li><strong>createPlan</strong>: Register an execution plan with ordered steps</li>
            <li><strong>startPlan</strong>: Request user approval (requires permission)</li>
            <li><strong>updateStep</strong>: Report progress on each step</li>
            <li><strong>addStep</strong>: Add new steps if needed during execution</li>
            <li><strong>completePlan</strong>: Mark plan as finished</li>
          </ol>

          <div class="callout callout-warning">
            <div class="callout-title">startPlan Requires Approval</div>
            The <code>startPlan</code> tool requires user permission because it
            commits the model to executing a plan. All other todo tools are
            auto-approved since they're purely informational.
          </div>
        </div>
        <div class="panel-code">
          <div class="code-label">Basic usage</div>
          <div class="code-block">
            <pre><code class="language-python">from shared import PluginRegistry

registry = PluginRegistry()
registry.discover()

# Expose todo plugin with defaults
registry.expose_tool('todo')

# With custom configuration
registry.expose_tool('todo', config={
    'reporter_type': 'console',
    'storage_type': 'file',
    'storage_path': '.jaato/plans.json',
})</code></pre>
          </div>

          <div class="code-label" style="margin-top: 24px;">Model workflow example</div>
          <div class="code-block">
            <pre><code class="language-python"># 1. Create the plan
createPlan(
    title="Refactor auth module",
    steps=[
        "Review current auth implementation",
        "Extract token validation to separate module",
        "Add unit tests for new module",
        "Update imports in dependent files"
    ]
)

# 2. Request user approval
startPlan(message="Ready to proceed?")

# 3. Report progress on each step
updateStep(step_id="step_1", status="completed")
updateStep(step_id="step_2", status="in_progress")

# 4. Complete the plan
completePlan(status="completed", summary="Refactoring done")</code></pre>
          </div>
        </div>
      </section>

      <!-- Configuration -->
      <section class="two-panel">
        <div class="panel-explanation">
          <h2 id="configuration">Configuration Parameters</h2>

          <h3>reporter_type</h3>
          <p>How to report plan progress to the user.</p>
          <table>
            <tbody>
              <tr><td><strong>Type</strong></td><td><code>"console" | "webhook" | "file"</code></td></tr>
              <tr><td><strong>Default</strong></td><td><code>"console"</code></td></tr>
            </tbody>
          </table>

          <h3>reporter_config</h3>
          <p>Configuration for the selected reporter.</p>
          <table>
            <tbody>
              <tr><td><strong>Type</strong></td><td><code>Dict[str, Any]</code></td></tr>
              <tr><td><strong>Default</strong></td><td><code>{}</code></td></tr>
            </tbody>
          </table>

          <h3>storage_type</h3>
          <p>How to persist plan data.</p>
          <table>
            <tbody>
              <tr><td><strong>Type</strong></td><td><code>"memory" | "file" | "hybrid"</code></td></tr>
              <tr><td><strong>Default</strong></td><td><code>"memory"</code></td></tr>
            </tbody>
          </table>

          <h3>storage_path</h3>
          <p>Path for file-based storage.</p>
          <table>
            <tbody>
              <tr><td><strong>Type</strong></td><td><code>str</code></td></tr>
              <tr><td><strong>Default</strong></td><td><code>".jaato/plans.json"</code></td></tr>
            </tbody>
          </table>

          <h3>config_path</h3>
          <p>Path to todo.json configuration file.</p>
          <table>
            <tbody>
              <tr><td><strong>Type</strong></td><td><code>str</code></td></tr>
              <tr><td><strong>Default</strong></td><td><code>".jaato/todo.json"</code></td></tr>
            </tbody>
          </table>
        </div>
        <div class="panel-code">
          <div class="code-label">Configuration examples</div>
          <div class="code-block">
            <pre><code class="language-python"># Console reporter with file storage
registry.expose_tool('todo', config={
    'reporter_type': 'console',
    'storage_type': 'file',
    'storage_path': '.jaato/plans.json',
})

# Webhook reporter for remote monitoring
registry.expose_tool('todo', config={
    'reporter_type': 'webhook',
    'reporter_config': {
        'url': 'https://api.example.com/plans',
        'headers': {'Authorization': 'Bearer token'},
    },
})

# File reporter for log-based tracking
registry.expose_tool('todo', config={
    'reporter_type': 'file',
    'reporter_config': {
        'path': '/var/log/jaato/plans.log',
    },
})</code></pre>
          </div>

          <div class="code-label" style="margin-top: 24px;">todo.json config file</div>
          <div class="code-block">
            <pre><code class="language-json">{
  "reporter_type": "console",
  "storage_type": "file",
  "storage_path": ".jaato/plans.json"
}</code></pre>
          </div>
        </div>
      </section>

      <!-- Tools Reference -->
      <section class="two-panel">
        <div class="panel-explanation">
          <h2 id="tools">Tool Reference</h2>

          <h3>createPlan</h3>
          <p>Register a new execution plan with ordered steps.</p>
          <table>
            <thead><tr><th>Parameter</th><th>Type</th><th>Required</th></tr></thead>
            <tbody>
              <tr><td><code>title</code></td><td><code>string</code></td><td>Yes</td></tr>
              <tr><td><code>steps</code></td><td><code>string[]</code></td><td>Yes</td></tr>
            </tbody>
          </table>

          <h3>startPlan</h3>
          <p>Request user approval to begin execution. Requires permission.</p>
          <table>
            <thead><tr><th>Parameter</th><th>Type</th><th>Required</th></tr></thead>
            <tbody>
              <tr><td><code>message</code></td><td><code>string</code></td><td>No</td></tr>
            </tbody>
          </table>

          <h3>updateStep</h3>
          <p>Report progress on a specific step.</p>
          <table>
            <thead><tr><th>Parameter</th><th>Type</th><th>Required</th></tr></thead>
            <tbody>
              <tr><td><code>step_id</code></td><td><code>string</code></td><td>Yes</td></tr>
              <tr><td><code>status</code></td><td><code>"in_progress" | "completed" | "failed" | "skipped"</code></td><td>Yes</td></tr>
              <tr><td><code>result</code></td><td><code>string</code></td><td>No</td></tr>
              <tr><td><code>error</code></td><td><code>string</code></td><td>No</td></tr>
            </tbody>
          </table>

          <h3>addStep</h3>
          <p>Add a new step during execution.</p>
          <table>
            <thead><tr><th>Parameter</th><th>Type</th><th>Required</th></tr></thead>
            <tbody>
              <tr><td><code>description</code></td><td><code>string</code></td><td>Yes</td></tr>
              <tr><td><code>after_step_id</code></td><td><code>string</code></td><td>No</td></tr>
            </tbody>
          </table>

          <h3>completePlan</h3>
          <p>Mark the plan as finished.</p>
          <table>
            <thead><tr><th>Parameter</th><th>Type</th><th>Required</th></tr></thead>
            <tbody>
              <tr><td><code>status</code></td><td><code>"completed" | "failed" | "cancelled"</code></td><td>Yes</td></tr>
              <tr><td><code>summary</code></td><td><code>string</code></td><td>No</td></tr>
            </tbody>
          </table>
        </div>
        <div class="panel-code">
          <div class="code-label">createPlan response</div>
          <div class="code-block">
            <pre><code class="language-json">{
  "plan_id": "plan_abc123",
  "title": "Refactor auth module",
  "status": "pending",
  "steps": [
    {"id": "step_1", "description": "Review current auth...", "status": "pending"},
    {"id": "step_2", "description": "Extract token...", "status": "pending"},
    {"id": "step_3", "description": "Add unit tests...", "status": "pending"},
    {"id": "step_4", "description": "Update imports...", "status": "pending"}
  ],
  "message": "Plan created. Call startPlan to request approval."
}</code></pre>
          </div>

          <div class="code-label" style="margin-top: 24px;">getPlanStatus response</div>
          <div class="code-block">
            <pre><code class="language-json">{
  "plan_id": "plan_abc123",
  "title": "Refactor auth module",
  "status": "in_progress",
  "progress": {
    "completed": 2,
    "total": 4,
    "percentage": 50
  },
  "steps": [
    {"id": "step_1", "status": "completed", "result": "..."},
    {"id": "step_2", "status": "completed", "result": "..."},
    {"id": "step_3", "status": "in_progress"},
    {"id": "step_4", "status": "pending"}
  ]
}</code></pre>
          </div>
        </div>
      </section>

      <!-- User Command -->
      <section class="two-panel">
        <div class="panel-explanation">
          <h2 id="user-command">User Command</h2>

          <h3>plan</h3>
          <p>
            Show current or most recent plan status. This command can be invoked
            directly by the user without model mediation.
          </p>

          <table>
            <tbody>
              <tr><td><strong>Command</strong></td><td><code>plan</code></td></tr>
              <tr><td><strong>share_with_model</strong></td><td><code>False</code></td></tr>
              <tr><td><strong>Auto-approved</strong></td><td>Yes</td></tr>
            </tbody>
          </table>

          <p>
            The output is NOT shared with the model since it's purely for user
            visibility into progress. This keeps the conversation focused while
            allowing users to check plan status at any time.
          </p>
        </div>
        <div class="panel-code">
          <div class="code-label">User command example</div>
          <div class="code-block">
            <pre><code class="language-text">> plan

Current Plan: Refactor auth module
Status: in_progress

Steps:
  [x] step_1: Review current auth implementation
  [x] step_2: Extract token validation to separate module
  [>] step_3: Add unit tests for new module
  [ ] step_4: Update imports in dependent files

Progress: 2/4 (50%)</code></pre>
          </div>
        </div>
      </section>

      <!-- Step Status Rules -->
      <section class="two-panel">
        <div class="panel-explanation">
          <h2 id="step-status-rules">Step Status Rules</h2>
          <p>
            The model is instructed to be honest about step outcomes:
          </p>

          <table>
            <thead>
              <tr><th>Status</th><th>When to Use</th></tr>
            </thead>
            <tbody>
              <tr>
                <td><code>completed</code></td>
                <td>Step was FULLY accomplished with expected outcome</td>
              </tr>
              <tr>
                <td><code>failed</code></td>
                <td>Could NOT achieve the step's goal for ANY reason</td>
              </tr>
              <tr>
                <td><code>skipped</code></td>
                <td>Step became unnecessary or was intentionally bypassed</td>
              </tr>
              <tr>
                <td><code>in_progress</code></td>
                <td>Currently working on this step</td>
              </tr>
            </tbody>
          </table>

          <div class="callout callout-info">
            <div class="callout-title">Honest Reporting</div>
            The model is instructed: "If you say 'could not', 'unable to', or
            similar in the result, the status MUST be 'failed'. Being honest
            about failures is more valuable than false completion reports."
          </div>
        </div>
        <div class="panel-code">
          <div class="code-label">Status examples</div>
          <div class="code-block">
            <pre><code class="language-python"># Correct: Step fully achieved
updateStep(
    step_id="step_1",
    status="completed",
    result="Found 3 auth-related files: auth.py, tokens.py, session.py"
)

# Correct: Step failed
updateStep(
    step_id="step_2",
    status="failed",
    error="Could not find token validation logic in expected location"
)

# Correct: Step became unnecessary
updateStep(
    step_id="step_3",
    status="skipped",
    result="Tests already exist, no need to add more"
)

# WRONG: Marking partial success as completed
updateStep(
    step_id="step_4",
    status="completed",  # Should be "failed"!
    result="Unable to update 2 of 5 imports due to circular dependencies"
)</code></pre>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="https://unpkg.com/lunr@2.3.9/lunr.min.js"></script>


  <script src="../../assets/js/docs.js"></script>
</body>
</html>
